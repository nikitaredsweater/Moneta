_type: export
__export_format: 4
__export_date: "2025-12-27T00:00:00.000Z"
__export_source: "insomnia.desktop.app:v2023.5.8"

resources:
  # Workspace
  - _id: wrk_moneta_company
    parentId: null
    modified: 1703635200000
    created: 1703635200000
    name: Moneta Company API
    description: |
      # Moneta Company API Collection

      This collection contains endpoints for managing companies in the Moneta platform.

      ## Overview

      Companies are core entities in Moneta that represent business organizations. Each company can have:
      - Multiple addresses (headquarters, branches, etc.)
      - Multiple users (employees with different roles)
      - Multiple instruments (financial instruments issued by the company)

      ## Authentication

      All endpoints require a valid JWT Bearer token obtained from the `/v1/auth/login` endpoint.

      ## Available Includes

      When fetching a company by ID or searching companies, you can include related entities:

      | Include | Description |
      |---------|-------------|
      | `addresses` | Company addresses (headquarters, branches) |
      | `users` | Users belonging to the company |
      | `instruments` | Financial instruments issued by the company |

      Use query parameter: `?include=addresses,users,instruments`

      **Note:** Includes are supported on both `GET /company/{id}` and `POST /company/search` endpoints.

      ## Permissions

      | Permission | Description |
      |------------|-------------|
      | `VIEW.COMPANY` | View company information |
      | `CREATE.COMPANY` | Create new companies (ADMIN only) |
    scope: collection
    _type: workspace

  # Base Environment
  - _id: env_company_base
    parentId: wrk_moneta_company
    modified: 1703635200000
    created: 1703635200000
    name: Base Environment
    data:
      base_url: "http://localhost:8080"
      api_version: v1
    dataPropertyOrder:
      "&":
        - base_url
        - api_version
    color: null
    isPrivate: false
    metaSortKey: 1703635200000
    _type: environment

  # Local Development Environment
  - _id: env_company_local
    parentId: env_company_base
    modified: 1703635200000
    created: 1703635200000
    name: Local Development
    data:
      base_url: "http://localhost:8080"
      admin_token: ""
      test_company_id: ""
    dataPropertyOrder:
      "&":
        - base_url
        - admin_token
        - test_company_id
    color: "#7d69cb"
    isPrivate: false
    metaSortKey: 1703635200001
    _type: environment

  # Company Folder
  - _id: fld_company
    parentId: wrk_moneta_company
    modified: 1703635200000
    created: 1703635200000
    name: Company
    description: |
      # Company Management Endpoints

      Endpoints for viewing and creating companies.

      **Base Path:** `/v1/company`
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1703635200000
    _type: request_group

  # Get All Companies
  - _id: req_get_all_companies
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/"
    name: "Get All Companies"
    description: |
      # GET /v1/company/

      Retrieve all companies in the system.

      ## When to Use

      Use when you need a complete list of all companies without filtering.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Request Body

      None required.

      ## Response (200 OK)

      ```json
      [
        {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "createdAt": "2024-01-15T10:30:00Z",
          "updatedAt": "2024-01-15T10:30:00Z",
          "legalName": "Acme Corporation",
          "tradeName": "Acme",
          "registrationNumber": "REG-12345",
          "incorporationDate": "2020-01-15"
        }
      ]
      ```

      ## Response Fields

      | Field | Type | Description |
      |-------|------|-------------|
      | `id` | UUID | Unique company identifier |
      | `createdAt` | datetime | Record creation timestamp |
      | `updatedAt` | datetime | Last update timestamp |
      | `legalName` | string | Official legal name |
      | `tradeName` | string | Trading/brand name (optional) |
      | `registrationNumber` | string | Company registration number |
      | `incorporationDate` | date | Date of incorporation |

      ## Error Responses

      | Code | Condition | Detail |
      |------|-----------|--------|
      | 401 | Missing/invalid token | "Not authenticated" |
      | 403 | Insufficient permissions | "Insufficient permissions" |
      | 500 | Server error | "Internal server error" |
    method: GET
    body: {}
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635200000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Search Companies
  - _id: req_search_companies
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/search"
    name: "Search Companies"
    description: |
      # POST /v1/company/search

      Search companies with filters, pagination, sorting, and optional includes.

      ## When to Use

      Use when you need to find companies matching specific criteria or paginate through company records.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Query Parameters

      | Parameter | Type | Description |
      |-----------|------|-------------|
      | `include` | string | Comma-separated list of relations to include (addresses, users, instruments) |

      ## Request Body

      ```json
      {
        "legalName": "Corp",
        "tradeName": "Trading",
        "registrationNumber": "REG",
        "incorporationDateAfter": "2020-01-01",
        "incorporationDateBefore": "2024-12-31",
        "createdAtAfter": "2023-01-01",
        "createdAtBefore": "2024-12-31",
        "sort": "-createdAt",
        "limit": 50,
        "offset": 0
      }
      ```

      ## Request Fields

      | Field | Type | Required | Description |
      |-------|------|----------|-------------|
      | `legalName` | string | No | Partial match on legal name (case-insensitive) |
      | `tradeName` | string | No | Partial match on trade name (case-insensitive) |
      | `registrationNumber` | string | No | Partial match on registration number |
      | `incorporationDateAfter` | date | No | Incorporated on or after this date |
      | `incorporationDateBefore` | date | No | Incorporated on or before this date |
      | `createdAtAfter` | date | No | Created on or after this date |
      | `createdAtBefore` | date | No | Created on or before this date |
      | `sort` | string | No | Sort order (default: `-createdAt`) |
      | `limit` | integer | No | Max results (1-200, default: 50) |
      | `offset` | integer | No | Skip results (default: 0) |

      ## Sorting

      Use comma-separated field names. Prefix with `-` for descending order.

      **Sortable fields:** `createdAt`, `legalName`, `tradeName`, `incorporationDate`

      **Examples:**
      - `-createdAt` (newest first)
      - `legalName` (alphabetical A-Z)
      - `-incorporationDate,legalName` (newest incorporation, then alphabetical)

      ## Response (200 OK)

      ```json
      [
        {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "createdAt": "2024-01-15T10:30:00Z",
          "updatedAt": "2024-01-15T10:30:00Z",
          "legalName": "Acme Corporation",
          "tradeName": "Acme",
          "registrationNumber": "REG-12345",
          "incorporationDate": "2020-01-15",
          "addresses": null,
          "users": null,
          "instruments": null
        }
      ]
      ```

      ## Error Responses

      | Code | Condition | Detail |
      |------|-----------|--------|
      | 401 | Missing/invalid token | "Not authenticated" |
      | 403 | Insufficient permissions | "Insufficient permissions" |
      | 422 | Invalid filter values | Validation error details |
      | 500 | Server error | "Internal server error" |
    method: POST
    body:
      mimeType: application/json
      text: |
        {
          "limit": 50,
          "offset": 0,
          "sort": "-createdAt"
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635199000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Search Companies with Filters
  - _id: req_search_companies_filtered
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/search"
    name: "Search Companies - With Filters"
    description: |
      # POST /v1/company/search (With Filters)

      Example search with legal name and date filters applied.

      ## When to Use

      Use when searching for companies by specific criteria like name patterns or incorporation date ranges.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Example Request

      This example searches for companies:
      - Legal name contains "Corp"
      - Incorporated after January 1, 2020
      - Sorted by incorporation date (newest first)
      - Limited to 10 results
    method: POST
    body:
      mimeType: application/json
      text: |
        {
          "legalName": "Corp",
          "incorporationDateAfter": "2020-01-01",
          "limit": 10,
          "offset": 0,
          "sort": "-incorporationDate"
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635198000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Search Companies with Addresses Include
  - _id: req_search_companies_include_addresses
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/search"
    name: "Search Companies - Include Addresses"
    description: |
      # POST /v1/company/search?include=addresses

      Search companies with addresses included in the response.

      ## When to Use

      Use when searching for companies and you need their addresses loaded in a single request.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Query Parameters

      | Parameter | Value | Description |
      |-----------|-------|-------------|
      | `include` | `addresses` | Load company addresses |

      ## Response (200 OK)

      ```json
      [
        {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "createdAt": "2024-01-15T10:30:00Z",
          "updatedAt": "2024-01-15T10:30:00Z",
          "legalName": "Acme Corporation",
          "tradeName": "Acme",
          "registrationNumber": "REG-12345",
          "incorporationDate": "2020-01-15",
          "addresses": [
            {
              "id": "660e8400-e29b-41d4-a716-446655440001",
              "addressLine1": "123 Main Street",
              "city": "New York",
              "country": "USA",
              "addressType": "HEADQUARTERS"
            }
          ],
          "users": null,
          "instruments": null
        }
      ]
      ```
    method: POST
    body:
      mimeType: application/json
      text: |
        {
          "limit": 50,
          "offset": 0,
          "sort": "-createdAt"
        }
    parameters:
      - name: include
        value: addresses
        id: param_include_addresses
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635197500
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Search Companies with Users Include
  - _id: req_search_companies_include_users
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/search"
    name: "Search Companies - Include Users"
    description: |
      # POST /v1/company/search?include=users

      Search companies with users included in the response.

      ## When to Use

      Use when searching for companies and you need their users loaded in a single request.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Query Parameters

      | Parameter | Value | Description |
      |-----------|-------|-------------|
      | `include` | `users` | Load company users |

      ## Response (200 OK)

      Returns an array of companies with `users` populated and other relations as null.
    method: POST
    body:
      mimeType: application/json
      text: |
        {
          "limit": 50,
          "offset": 0,
          "sort": "-createdAt"
        }
    parameters:
      - name: include
        value: users
        id: param_include_users
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635197400
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Search Companies with All Includes
  - _id: req_search_companies_include_all
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/search"
    name: "Search Companies - Include All"
    description: |
      # POST /v1/company/search?include=addresses,users,instruments

      Search companies with all related entities included.

      ## When to Use

      Use when you need a complete view of companies including all addresses, users, and instruments.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Query Parameters

      | Parameter | Value | Description |
      |-----------|-------|-------------|
      | `include` | `addresses,users,instruments` | Load all relations |

      ## Response (200 OK)

      Returns an array of companies with all three arrays populated: `addresses`, `users`, and `instruments`.

      ## Performance Note

      This request loads all related data for each company and may be slower than targeted includes. Use specific includes when you only need certain relations.
    method: POST
    body:
      mimeType: application/json
      text: |
        {
          "limit": 50,
          "offset": 0,
          "sort": "-createdAt"
        }
    parameters:
      - name: include
        value: addresses,users,instruments
        id: param_include_all
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635197300
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Get Company by ID - No Includes
  - _id: req_get_company_by_id
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/{{ _.test_company_id }}"
    name: "Get Company by ID"
    description: |
      # GET /v1/company/{company_id}

      Retrieve a specific company by its UUID.

      ## When to Use

      Use when you need details for a specific company without related entities.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Path Parameters

      | Parameter | Type | Description |
      |-----------|------|-------------|
      | `company_id` | UUID | The company's unique identifier |

      ## Response (200 OK)

      ```json
      {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "createdAt": "2024-01-15T10:30:00Z",
        "updatedAt": "2024-01-15T10:30:00Z",
        "legalName": "Acme Corporation",
        "tradeName": "Acme",
        "registrationNumber": "REG-12345",
        "incorporationDate": "2020-01-15",
        "addresses": null,
        "users": null,
        "instruments": null
      }
      ```

      ## Response Fields

      | Field | Type | Description |
      |-------|------|-------------|
      | `id` | UUID | Unique company identifier |
      | `createdAt` | datetime | Record creation timestamp |
      | `updatedAt` | datetime | Last update timestamp |
      | `legalName` | string | Official legal name |
      | `tradeName` | string | Trading/brand name (optional) |
      | `registrationNumber` | string | Company registration number |
      | `incorporationDate` | date | Date of incorporation |
      | `addresses` | array | Company addresses (null if not included) |
      | `users` | array | Company users (null if not included) |
      | `instruments` | array | Company instruments (null if not included) |

      ## Error Responses

      | Code | Condition | Detail |
      |------|-----------|--------|
      | 401 | Missing/invalid token | "Not authenticated" |
      | 403 | Insufficient permissions | "Insufficient permissions" |
      | 404 | Company not found | "Entity was not found" |
      | 422 | Invalid UUID format | Validation error details |
      | 500 | Server error | "Internal server error" |

      ## Setup

      Set `test_company_id` in your environment to a valid company UUID.
    method: GET
    body: {}
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635197000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Get Company with Addresses Include
  - _id: req_get_company_include_addresses
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/{{ _.test_company_id }}"
    name: "Get Company - Include Addresses"
    description: |
      # GET /v1/company/{company_id}?include=addresses

      Retrieve a company with its addresses loaded.

      ## When to Use

      Use when you need company details along with all registered addresses (headquarters, branches, etc.).

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Query Parameters

      | Parameter | Value | Description |
      |-----------|-------|-------------|
      | `include` | `addresses` | Load company addresses |

      ## Response (200 OK)

      ```json
      {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "createdAt": "2024-01-15T10:30:00Z",
        "updatedAt": "2024-01-15T10:30:00Z",
        "legalName": "Acme Corporation",
        "tradeName": "Acme",
        "registrationNumber": "REG-12345",
        "incorporationDate": "2020-01-15",
        "addresses": [
          {
            "id": "660e8400-e29b-41d4-a716-446655440001",
            "createdAt": "2024-01-15T10:35:00Z",
            "updatedAt": "2024-01-15T10:35:00Z",
            "companyId": "550e8400-e29b-41d4-a716-446655440000",
            "addressLine1": "123 Main Street",
            "addressLine2": "Suite 100",
            "city": "New York",
            "state": "NY",
            "postalCode": "10001",
            "country": "USA",
            "addressType": "HEADQUARTERS"
          }
        ],
        "users": null,
        "instruments": null
      }
      ```

      ## Error Responses

      | Code | Condition | Detail |
      |------|-----------|--------|
      | 401 | Missing/invalid token | "Not authenticated" |
      | 403 | Insufficient permissions | "Insufficient permissions" |
      | 404 | Company not found | "Entity was not found" |
      | 500 | Server error | "Internal server error" |
    method: GET
    body: {}
    parameters:
      - name: include
        value: addresses
        id: param_include_addresses
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635196000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Get Company with Users Include
  - _id: req_get_company_include_users
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/{{ _.test_company_id }}"
    name: "Get Company - Include Users"
    description: |
      # GET /v1/company/{company_id}?include=users

      Retrieve a company with its users loaded.

      ## When to Use

      Use when you need to see all users belonging to a specific company.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Query Parameters

      | Parameter | Value | Description |
      |-----------|-------|-------------|
      | `include` | `users` | Load company users |

      ## Response (200 OK)

      ```json
      {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "createdAt": "2024-01-15T10:30:00Z",
        "updatedAt": "2024-01-15T10:30:00Z",
        "legalName": "Acme Corporation",
        "tradeName": "Acme",
        "registrationNumber": "REG-12345",
        "incorporationDate": "2020-01-15",
        "addresses": null,
        "users": [
          {
            "id": "770e8400-e29b-41d4-a716-446655440002",
            "createdAt": "2024-01-15T11:00:00Z",
            "updatedAt": "2024-01-15T11:00:00Z",
            "email": "john.doe@acme.com",
            "firstName": "John",
            "lastName": "Doe",
            "companyId": "550e8400-e29b-41d4-a716-446655440000",
            "role": "ADMIN",
            "accountStatus": "ACTIVE"
          }
        ],
        "instruments": null
      }
      ```

      ## Error Responses

      | Code | Condition | Detail |
      |------|-----------|--------|
      | 401 | Missing/invalid token | "Not authenticated" |
      | 403 | Insufficient permissions | "Insufficient permissions" |
      | 404 | Company not found | "Entity was not found" |
      | 500 | Server error | "Internal server error" |
    method: GET
    body: {}
    parameters:
      - name: include
        value: users
        id: param_include_users
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635195000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Get Company with Instruments Include
  - _id: req_get_company_include_instruments
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/{{ _.test_company_id }}"
    name: "Get Company - Include Instruments"
    description: |
      # GET /v1/company/{company_id}?include=instruments

      Retrieve a company with its instruments loaded.

      ## When to Use

      Use when you need to see all financial instruments issued by a specific company.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Query Parameters

      | Parameter | Value | Description |
      |-----------|-------|-------------|
      | `include` | `instruments` | Load company instruments |

      ## Response (200 OK)

      ```json
      {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "createdAt": "2024-01-15T10:30:00Z",
        "updatedAt": "2024-01-15T10:30:00Z",
        "legalName": "Acme Corporation",
        "tradeName": "Acme",
        "registrationNumber": "REG-12345",
        "incorporationDate": "2020-01-15",
        "addresses": null,
        "users": null,
        "instruments": [
          {
            "id": "880e8400-e29b-41d4-a716-446655440003",
            "createdAt": "2024-02-01T09:00:00Z",
            "updatedAt": "2024-02-01T09:00:00Z",
            "name": "Acme Bond 2025",
            "faceValue": 1000.00,
            "currency": "USD",
            "maturityDate": "2025-12-31",
            "maturityPayment": 1050.00,
            "instrumentStatus": "ACTIVE",
            "maturityStatus": "NOT_DUE",
            "tradingStatus": "TRADING",
            "issuerId": "550e8400-e29b-41d4-a716-446655440000",
            "createdBy": "770e8400-e29b-41d4-a716-446655440002"
          }
        ]
      }
      ```

      ## Error Responses

      | Code | Condition | Detail |
      |------|-----------|--------|
      | 401 | Missing/invalid token | "Not authenticated" |
      | 403 | Insufficient permissions | "Insufficient permissions" |
      | 404 | Company not found | "Entity was not found" |
      | 500 | Server error | "Internal server error" |
    method: GET
    body: {}
    parameters:
      - name: include
        value: instruments
        id: param_include_instruments
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635194000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Get Company with Addresses + Users
  - _id: req_get_company_include_addresses_users
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/{{ _.test_company_id }}"
    name: "Get Company - Include Addresses + Users"
    description: |
      # GET /v1/company/{company_id}?include=addresses,users

      Retrieve a company with addresses and users loaded.

      ## When to Use

      Use when you need company details with both location and personnel information.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Query Parameters

      | Parameter | Value | Description |
      |-----------|-------|-------------|
      | `include` | `addresses,users` | Load addresses and users |

      ## Response (200 OK)

      Returns company with both `addresses` and `users` arrays populated, `instruments` will be null.

      ## Error Responses

      | Code | Condition | Detail |
      |------|-----------|--------|
      | 401 | Missing/invalid token | "Not authenticated" |
      | 403 | Insufficient permissions | "Insufficient permissions" |
      | 404 | Company not found | "Entity was not found" |
      | 500 | Server error | "Internal server error" |
    method: GET
    body: {}
    parameters:
      - name: include
        value: addresses,users
        id: param_include_addresses_users
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635193000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Get Company with Addresses + Instruments
  - _id: req_get_company_include_addresses_instruments
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/{{ _.test_company_id }}"
    name: "Get Company - Include Addresses + Instruments"
    description: |
      # GET /v1/company/{company_id}?include=addresses,instruments

      Retrieve a company with addresses and instruments loaded.

      ## When to Use

      Use when you need company location information along with its financial instruments.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Query Parameters

      | Parameter | Value | Description |
      |-----------|-------|-------------|
      | `include` | `addresses,instruments` | Load addresses and instruments |

      ## Response (200 OK)

      Returns company with both `addresses` and `instruments` arrays populated, `users` will be null.

      ## Error Responses

      | Code | Condition | Detail |
      |------|-----------|--------|
      | 401 | Missing/invalid token | "Not authenticated" |
      | 403 | Insufficient permissions | "Insufficient permissions" |
      | 404 | Company not found | "Entity was not found" |
      | 500 | Server error | "Internal server error" |
    method: GET
    body: {}
    parameters:
      - name: include
        value: addresses,instruments
        id: param_include_addresses_instruments
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635192000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Get Company with Users + Instruments
  - _id: req_get_company_include_users_instruments
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/{{ _.test_company_id }}"
    name: "Get Company - Include Users + Instruments"
    description: |
      # GET /v1/company/{company_id}?include=users,instruments

      Retrieve a company with users and instruments loaded.

      ## When to Use

      Use when you need company personnel and financial instrument information together.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Query Parameters

      | Parameter | Value | Description |
      |-----------|-------|-------------|
      | `include` | `users,instruments` | Load users and instruments |

      ## Response (200 OK)

      Returns company with both `users` and `instruments` arrays populated, `addresses` will be null.

      ## Error Responses

      | Code | Condition | Detail |
      |------|-----------|--------|
      | 401 | Missing/invalid token | "Not authenticated" |
      | 403 | Insufficient permissions | "Insufficient permissions" |
      | 404 | Company not found | "Entity was not found" |
      | 500 | Server error | "Internal server error" |
    method: GET
    body: {}
    parameters:
      - name: include
        value: users,instruments
        id: param_include_users_instruments
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635191000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Get Company with All Includes
  - _id: req_get_company_include_all
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/{{ _.test_company_id }}"
    name: "Get Company - Include All"
    description: |
      # GET /v1/company/{company_id}?include=addresses,users,instruments

      Retrieve a company with all related entities loaded.

      ## When to Use

      Use when you need a complete view of a company including all addresses, users, and instruments.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `VIEW.COMPANY`

      ## Query Parameters

      | Parameter | Value | Description |
      |-----------|-------|-------------|
      | `include` | `addresses,users,instruments` | Load all relations |

      ## Response (200 OK)

      Returns company with all three arrays populated: `addresses`, `users`, and `instruments`.

      ## Performance Note

      This request loads all related data and may be slower than targeted includes. Use specific includes when you only need certain relations.

      ## Error Responses

      | Code | Condition | Detail |
      |------|-----------|--------|
      | 401 | Missing/invalid token | "Not authenticated" |
      | 403 | Insufficient permissions | "Insufficient permissions" |
      | 404 | Company not found | "Entity was not found" |
      | 500 | Server error | "Internal server error" |
    method: GET
    body: {}
    parameters:
      - name: include
        value: addresses,users,instruments
        id: param_include_all
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635190000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Create Company
  - _id: req_create_company
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/"
    name: "Create Company"
    description: |
      # POST /v1/company/

      Create a new company in the system.

      ## When to Use

      Use when onboarding a new company to the Moneta platform.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `CREATE.COMPANY` (typically ADMIN only)

      ## Request Body

      ```json
      {
        "legalName": "New Company LLC",
        "tradeName": "NewCo",
        "registrationNumber": "REG-12345",
        "incorporationDate": "2024-01-15"
      }
      ```

      ## Request Fields

      | Field | Type | Required | Description |
      |-------|------|----------|-------------|
      | `legalName` | string | Yes | Official legal company name |
      | `tradeName` | string | No | Trading/brand name |
      | `registrationNumber` | string | Yes | Company registration number |
      | `incorporationDate` | date | Yes | Date of incorporation (YYYY-MM-DD) |

      ## Response (201 Created)

      ```json
      {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "createdAt": "2024-01-15T10:30:00Z",
        "updatedAt": "2024-01-15T10:30:00Z",
        "legalName": "New Company LLC",
        "tradeName": "NewCo",
        "registrationNumber": "REG-12345",
        "incorporationDate": "2024-01-15"
      }
      ```

      ## Error Responses

      | Code | Condition | Detail |
      |------|-----------|--------|
      | 401 | Missing/invalid token | "Not authenticated" |
      | 403 | Insufficient permissions | "Insufficient permissions" |
      | 409 | Duplicate registration number | "Entity already exists" |
      | 422 | Missing/invalid fields | Validation error details |
      | 500 | Server error | "Internal server error" |

      ## Notes

      - `registrationNumber` must be unique across all companies
      - After creating a company, you can add addresses via the company address endpoints
      - Users can be assigned to this company during user creation
    method: POST
    body:
      mimeType: application/json
      text: |
        {
          "legalName": "New Company LLC",
          "tradeName": "NewCo",
          "registrationNumber": "REG-12345",
          "incorporationDate": "2024-01-15"
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635189000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Create Company - Minimal
  - _id: req_create_company_minimal
    parentId: fld_company
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/"
    name: "Create Company - Minimal"
    description: |
      # POST /v1/company/ (Minimal)

      Create a company with only required fields.

      ## When to Use

      Use when you only have basic company information and want to add optional details later.

      ## Authentication

      **Required:** Yes (Bearer Token)

      ## Permissions

      **Required:** `CREATE.COMPANY` (typically ADMIN only)

      ## Request Body

      ```json
      {
        "legalName": "Minimal Company Inc",
        "registrationNumber": "MIN-99999",
        "incorporationDate": "2023-06-01"
      }
      ```

      ## Request Fields

      | Field | Type | Required | Description |
      |-------|------|----------|-------------|
      | `legalName` | string | Yes | Official legal company name |
      | `registrationNumber` | string | Yes | Company registration number |
      | `incorporationDate` | date | Yes | Date of incorporation (YYYY-MM-DD) |

      ## Note

      `tradeName` is optional and will be null in the response if not provided.
    method: POST
    body:
      mimeType: application/json
      text: |
        {
          "legalName": "Minimal Company Inc",
          "registrationNumber": "MIN-99999",
          "incorporationDate": "2023-06-01"
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635188000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Error Cases Folder
  - _id: fld_company_errors
    parentId: wrk_moneta_company
    modified: 1703635200000
    created: 1703635200000
    name: Error Cases
    description: |
      # Error Test Cases

      This folder contains requests designed to trigger specific error responses.
      Use these to verify error handling and understand API behavior.
    environment: {}
    environmentPropertyOrder: null
    metaSortKey: -1703635100000
    _type: request_group

  # Get Company - Not Found (404)
  - _id: req_get_company_not_found
    parentId: fld_company_errors
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/00000000-0000-0000-0000-000000000000"
    name: "Get Company - Not Found (404)"
    description: |
      # GET /v1/company/{company_id} - 404 Test

      Test the 404 Not Found response when requesting a non-existent company.

      ## Expected Behavior

      The API should return a 404 status code with an error message.

      ## Response (404 Not Found)

      ```json
      {
        "detail": "Entity was not found"
      }
      ```

      ## Use Case

      This demonstrates how the API handles requests for resources that don't exist.
    method: GET
    body: {}
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635100000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Create Company - Missing Fields (422)
  - _id: req_create_company_missing_fields
    parentId: fld_company_errors
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/"
    name: "Create Company - Missing Fields (422)"
    description: |
      # POST /v1/company/ - 422 Test

      Test the 422 Unprocessable Entity response when required fields are missing.

      ## Expected Behavior

      The API should return a 422 status code with validation error details.

      ## Response (422 Unprocessable Entity)

      ```json
      {
        "detail": [
          {
            "type": "missing",
            "loc": ["body", "registrationNumber"],
            "msg": "Field required"
          },
          {
            "type": "missing",
            "loc": ["body", "incorporationDate"],
            "msg": "Field required"
          }
        ]
      }
      ```

      ## Use Case

      This demonstrates how the API validates required fields and reports missing data.
    method: POST
    body:
      mimeType: application/json
      text: |
        {
          "legalName": "Incomplete Company"
        }
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635099000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # No Auth Request (401)
  - _id: req_get_companies_no_auth
    parentId: fld_company_errors
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/"
    name: "Get All Companies - No Auth (401)"
    description: |
      # GET /v1/company/ - 401 Test

      Test the 401 Unauthorized response when no authentication is provided.

      ## Expected Behavior

      The API should return a 401 status code indicating authentication is required.

      ## Response (401 Unauthorized)

      ```json
      {
        "detail": "Not authenticated"
      }
      ```

      ## Use Case

      This demonstrates that all company endpoints require authentication.
    method: GET
    body: {}
    parameters: []
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication: {}
    metaSortKey: -1703635098000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request

  # Invalid Include Parameter
  - _id: req_get_company_invalid_include
    parentId: fld_company_errors
    modified: 1703635200000
    created: 1703635200000
    url: "{{ _.base_url }}/{{ _.api_version }}/company/{{ _.test_company_id }}"
    name: "Get Company - Invalid Include (422)"
    description: |
      # GET /v1/company/{company_id}?include=invalid - 422 Test

      Test the 422 Unprocessable Entity response when an invalid include parameter is used.

      ## Expected Behavior

      The API should return a 422 status code indicating the include value is invalid.

      ## Response (422 Unprocessable Entity)

      ```json
      {
        "detail": [
          {
            "type": "enum",
            "loc": ["query", "include"],
            "msg": "Input should be 'addresses', 'users' or 'instruments'"
          }
        ]
      }
      ```

      ## Valid Include Values

      - `addresses`
      - `users`
      - `instruments`

      ## Use Case

      This demonstrates how the API validates the `include` query parameter.
    method: GET
    body: {}
    parameters:
      - name: include
        value: invalid_relation
        id: param_invalid_include
    headers:
      - name: Content-Type
        value: application/json
        id: pair_content_type
    authentication:
      type: bearer
      token: "{{ _.admin_token }}"
    metaSortKey: -1703635097000
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
